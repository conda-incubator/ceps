<table>
<tr><td> Title </td><td> Formalize schema for <code>menuinst</code></td>
<tr><td> Status </td><td> Draft</td></tr>
<tr><td> Author(s) </td><td> Jaime Rodr√≠guez-Guerra &lt;jaime.rogue@gmail.com&gt;</td></tr>
<tr><td> Created </td><td> Oct 14, 2021</td></tr>
<tr><td> Updated </td><td> Oct 14, 2021</td></tr>
<tr><td> Discussion </td><td> NA </td></tr>
<tr><td> Implementation </td><td> NA </td></tr>
</table>

## Abstract

`menuinst` is a library used by `conda` to install menu items that point to commands provided by `conda` packages. It operates by discovering certain JSON files located in `$PREFIX/Menu` after linking the package to the environment.

This library has supported Windows for a long time but support for Linux and MacOS was not there (even if the original project did offer support). As these platforms are brought up to speed, we have an opportunity to consolidate the JSON metadata required in each OS (right now differing) and formalize it in a schema so other implementations can validate it with automated tooling.

The schema comprises the structure of the metadata document, the allowed keys and values, and the supported placeholders.

## Motivation

* Discuss currently accepted schemas across platforms
* Placeholders
* Inconsistent key names
* Opportunities for simplification

## Backwards compatibility

* Windows users do depend on the existing schema. There are a lot of packages that use it. This (unversioned) document needs to be kept around and respected.

## Other sections

Other relevant sections of the proposal.  Common sections include:

    * Specification -- The technical details of the proposed change.
    * Motivation -- Why the proposed change is needed.
    * Rationale -- Why particular decisions were made in the proposal.
    * Backwards Compatibility -- Will the proposed change break existing
      packages or workflows.
    * Alternatives -- Any alternatives considered during the design.
    * Sample Implementation -- Links to prototype or a sample implementation of
      the proposed change.
    * FAQ -- Frequently asked questions (and answers to them).
    * Resolution -- A short summary of the decision made by the community.
    * Reference -- Any references used in the design of the CEP.

## References

* [Rework linux/osx support plus new simplified format?](https://github.com/conda/menuinst/issues/48)
* [Mamba's implementation in C++](https://github.com/mamba-org/mamba/blob/81a490a/src/core/menuinst.cpp)

## Copyright

All CEPs are explicitly [CC0 1.0 Universal](https://creativecommons.org/publicdomain/zero/1.0/).
